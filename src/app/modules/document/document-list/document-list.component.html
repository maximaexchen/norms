<div class="btn-expand-collapse">
  <span class="nav-label">Auswahl Artikel</span>
  <span class="nav-button fas fa-chevron-left" (click)="toggleSidebar()"></span>
</div>

<!-- (sortFunction)="tableSort($event)"
  [customSort]="true" -->

<p-table
  #dataTable
  [value]="documents"
  [paginator]="true"
  [rows]="13"
  class="table"
  [globalFilterFields]="[
    'normNumber',
    'revision',
    'publisher',
    'description.de',
    'revisionDate',
    'owner.userName'
  ]"
  selectionMode="single"
  sortField="normNumber"
  [resizableColumns]="true"
  columnResizeMode="fit"
  [sortOrder]="1"
  [(selection)]="selectedDocument"
  (onRowSelect)="onRowSelect($event)"
  (onFilter)="onFilter($event, dataTable)"
>
  <ng-template pTemplate="caption">
    <div style="text-align: center;">
      <i class="fas fa-search" style="margin:4px 6px 0 0;"></i>
      <input
        type="text"
        pInputText
        size="50"
        i18n-placeholder
        placeholder="Globale Suche"
        (input)="dataTable.filterGlobal($event.target.value, 'contains')"
        style="width:auto"
      />
    </div>
    <div *ngIf="!filterInputCheck" class="alert alert-danger" role="alert">
      Erlaubt ASCII_Zeichen von 32 bis 126
    </div>
  </ng-template>
  <ng-template pTemplate="header">
    <tr>
      <th [pSortableColumn]="'normNumber'" width="120">
        Nummer<p-sortIcon [field]="'normNumber'"></p-sortIcon>
      </th>
      <th [pSortableColumn]="'revision'" width="90">
        Revision<p-sortIcon [field]="'revision'"></p-sortIcon>
      </th>
      <th [pSortableColumn]="'publisher'" width="110">
        Herausgeber
        <p-sortIcon [field]="'publisher'"></p-sortIcon>
      </th>
      <th>Beschreibung</th>

      <th [pSortableColumn]="'revisionDate'" width="110">
        Rev-Datum<p-sortIcon [field]="'revisionDate'"></p-sortIcon>
      </th>
      <th [pSortableColumn]="'owner.lastName'">
        Owner<p-sortIcon [field]="'owner'"></p-sortIcon>
      </th>
      <th width="40">
        Aktiv
      </th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-document>
    <tr [pSelectableRow]="document">
      <td>{{ document.normNumber }}</td>
      <td>{{ document.revision }}</td>
      <td>{{ document.publisher }}</td>
      <td
        *ngIf="document.normLanguage === 'de'"
        pTooltip="{{ document.description.de }}"
        tooltipPosition="top"
      >
        {{
          document.description.de.length > 15
            ? (document.description.de | slice: 0:15) + '...'
            : document.description.de
        }}
      </td>
      <td
        *ngIf="document.normLanguage === 'en' || document.normLanguage === ''"
        pTooltip="{{ document.description.en }}"
        tooltipPosition="top"
      >
        {{
          document.description.en.length > 15
            ? (document.description.en | slice: 0:15) + '...'
            : document.description.en
        }}
      </td>

      <td
        *ngIf="document.normLanguage === 'fr'"
        pTooltip="{{ document.description.fr }}"
        tooltipPosition="top"
      >
        {{
          document.description.fr.length > 15
            ? (document.description.fr | slice: 0:15) + '...'
            : document.description.fr
        }}
      </td>

      <td>{{ document.revisionDate | date }}</td>
      <td>
        <span *ngIf="document.owner">
          {{ document.owner.lastName }},
          {{ document.owner.firstName }}
        </span>
      </td>
      <td>
        <i
          [ngStyle]="{
            'font-size': '16px',
            color: document.active ? 'green' : 'red '
          }"
          [ngClass]="document.active ? 'fas fa-check-circle' : 'fas fa-ban'"
          aria-hidden="true"
        ></i>
      </td>
    </tr>
  </ng-template>
  <ng-template pTemplate="summary" let-document>
    <div
      style="height:100px; font-size:90%; padding:10px"
      i18n="@@document-status-data-count"
    >
      Es {documentCount, plural, =0 {wurde keine Dokument gefunden} =1 {wurde 1
      Dokument gefunden} other { wurden {{ documentCount }} Dokumente gefunden
      }}
    </div>
  </ng-template>
</p-table>
